(async e=>{if(!e.document||!e.location||!e.navigator)return;const t=t=>{let a=0;return new Promise((r,o)=>{const n=()=>{if(a++,a>250)return void o(new Error("Deferral timed out."));const s=e.document.querySelector(t);s?r(s):(console.log(`[TornPDA+]: '${t}' - Deferring...`),setTimeout(n,100))};n()})};if(console.log("[TornPDA+]: Common loaded."),e.execute_plus)return;e.execute_plus=Math.floor(Date.now()/1e3);const a=async e=>{if(console.log("[Execute+]: Checking HealthBar..."),!e)return void console.log("[Execute+]: Error - Invalid progress.");parseFloat(e.ariaLabel.replace(/Progress: (\d{1,3}\.?\d{0,2})%/,"$1"))<=15?e.classList.toggle("execute",!0):e.classList.toggle("execute",!1)};let r=await t("#torn-user"),o=JSON.parse(r.value),n=await t(`div[class^="playersModelWrap_"] div[class^="header_"]:not([aria-describedby^="player-name_${o.playername}"])`);if(n){console.log("[Execute+]: Adding HealthBar Observer..."),new MutationObserver(async e=>{for(const t of e)"attributes"===t.type&&"aria-label"===t.attributeName&&t.target.ariaLabel&&t.target.ariaLabel.startsWith("Progress:")&&await a(t.target)}).observe(n.parentElement,{subtree:!0,attributes:!0}),await a(n.querySelector('[aria-label^="Progress:"]'))}console.log("[Execute+]: Adding styles..."),e.document.head||await new Promise(t=>e.addEventListener("DOMContentLoaded",t,{once:!0}));const s=e.document.createElement("style");s.innerHTML=".execute{background-image:linear-gradient(#ffb46c,#ffa737)!important}",e.document.head.appendChild(s),console.log("[Execute+]: Styles added.")})();